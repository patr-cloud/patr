[package]
authors = ["Rakshith Ravi <rakshith.ravi@vicara.co>"]
default-run = "api"
edition = "2021"
name = "api"
rust-version.workspace = true
version.workspace = true

[features]
default = []
sample-data = []

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
anyhow = "1"
api_macros = { path = "../macros", package = "patr-macros" }
api_models = { path = "../api-models", package = "patr-api-dto", features = [
	"server",
] }
argon2 = "0.5"
async-stripe = { version = "0.21", features = [
	"runtime-tokio-hyper",
], default-features = false }
async-trait = "0.1"
axum = { version = "0.6", features = [
	"macros",
	"headers",
	"http2",
	"ws",
	"multipart",
] }
axum-extra = { version = "0.7", features = ["typed-routing"] }
axum-sqlx-tx = "0.5"
base32 = "0.4"
base64 = "0.21"
chrono = "0.4"
cloudflare = { git = "https://github.com/vicara-hq/cloudflare-rs", branch = "patr-must-haves" }
config_rs = { version = "0.13", package = "config" }
cron = "0.12"
deadpool = "*"
deadpool-lapin = "0.10"
either = "1"
futures = "0.3"
globset = "0.4"
handlebars = "4"
hex = "0.4"
hmac = "0.12"
http = "0.2"
itertools = "0.10"
jsonwebtoken = "8"
k8s-openapi = { version = "0.18", default-features = true, features = [
	"v1_24",
] } # Kube-rs depends on k8s-openapi
kube = { version = "0.82", default-features = true, features = [
	"derive",
	"runtime",
] } # Library for talking to Kubernetes API
lapin = "2"
lazy_static = "1"
lettre = { version = "0.10", default-features = false, features = [
	"tokio1",
	"builder",
	"smtp-transport",
	"tokio1-rustls-tls",
] }
log = "0.4"
num-traits = "0.2"
num_cpus = "1"
octorust = { git = "https://github.com/kavin-kr/third-party-api-clients", branch = "fix/list-all-repos" }
once_cell = "1"
rand = "0.8"
rcgen = "0.10"
redis = { version = "0.23", features = ["tokio-comp", "tokio-native-tls-comp"] }
regex = "1"
reqwest = { version = "0.11", features = ["json", "multipart", "cookies"] }
rust-s3 = { version = "0.33", features = ["tokio-rustls-tls", "with-tokio"] }
semver = "1"
serde = { version = "1", features = ["serde_derive"] }
serde_json = "1"
serde_qs = "0.12"
serde_yaml = "0.9"
sha2 = "0.10"
sqlx = { version = "0.6", features = [
	"bigdecimal",
	"chrono",
	"ipnetwork",
	"json",
	"offline",
	"postgres",
	"runtime-tokio-rustls",
	"time",
	"uuid",
] }
tokio = { version = "1", features = ["full"] }
tower = { version = "0.4", default-features = false }
tower-http = { version = "0.4", features = ["cors"], default-features = false }
trust-dns-client = "0.22"
url = "2"
vaultrs = "0.7"
zeroize = "1"
zip = "0.6"

[dependencies.log4rs]
default-features = false
features = [
	"console_appender",
	"rolling_file_appender",
	"compound_policy",
	"fixed_window_roller",
	"size_trigger",
	"background_rotation",
	"threshold_filter",
	"gzip",
]
version = "1"
